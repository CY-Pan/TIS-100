@0
MOV UP,DOWN

@1


@2
MOV RIGHT,ACC #CUR
SAV
L1:MOV RIGHT,DOWN
SWP
SAV
SUB DOWN
MOV ACC,RIGHT
MOV DOWN,RIGHT
JLZ INS
JMP L1
INS:SWP
MOV ACC,RIGHT

@3
L1:MOV UP,ACC
JEZ END
MOV ACC,LEFT
SL1:MOV DOWN,LEFT
MOV LEFT,ACC
JLZ INS
MOV LEFT,RIGHT
JMP SL1
INS:MOV LEFT,DOWN
MOV LEFT,DOWN
MOV -1,RIGHT
MOV RIGHT,NIL
JMP L1
END: MOV 0,RIGHT
MOV RIGHT,NIL

@4
ST:MOV 0,UP
L1:MOV LEFT,ACC
JGZ PUSH
JEZ OUT
SL1:MOV UP,ACC
JEZ END
MOV ACC DOWN
JMP SL1
PUSH:MOV ACC,UP
JMP L1
OUT:MOV 0,DOWN
MOV DOWN,LEFT
JMP L1
END:MOV -1,LEFT

@5


@6
MOV UP,ACC
MOV ACC,UP
MOV ACC,UP

@7
ST:MOV 999,LEFT
L1:MOV UP,ACC
JEZ OUT
MOV ACC,LEFT
JMP L1
OUT:MOV LEFT,ACC
MOV ACC,RIGHT
SUB 999
JEZ END
MOV RIGHT,DOWN
JMP OUT
END:MOV RIGHT,NIL
MOV 0,DOWN
MOV -1,UP

@8
MOV LEFT,LEFT
